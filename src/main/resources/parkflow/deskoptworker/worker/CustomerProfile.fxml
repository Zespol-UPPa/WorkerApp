<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox minWidth="1000.0" spacing="24" style="-fx-background-color: #F2F3FE; -fx-padding: 32;" stylesheets="@../styles/customers.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="parkflow.deskoptworker.Controllers.Worker.CustomerProfileController">

    <!-- Clear Filter Link -->
    <HBox alignment="CENTER_LEFT" spacing="8">
        <Button fx:id="clearFilterButton" onAction="#onClearFilter" style="-fx-background-color: transparent; -fx-text-fill: #2E3593; -fx-cursor: hand; -fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-underline: true;" styleClass="clear-filter-button" text="✕ Clear customer filter - viewing all data" />
    </HBox>

    <!-- Page Header -->
    <VBox spacing="8">
        <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 32px; -fx-text-fill: #333333;" text="Customer Profile" />
        <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #8E8E93;" text="Detailed information and activity" />
    </VBox>

    <!-- Customer Header Card -->
    <HBox alignment="CENTER_LEFT" spacing="0" style="-fx-background-color: white; -fx-background-radius: 12px; -fx-padding: 24;">

        <!-- Left: Name and Email -->
        <VBox spacing="4" HBox.hgrow="ALWAYS">
            <Label fx:id="customerNameLabel" style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 24px; -fx-text-fill: #333333;" text="Jan Kowalski" />
            <Label fx:id="customerEmailLabel" style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #8E8E93;" text="jan.kowalski@gmail.com" />
        </VBox>

        <!-- Right: Wallet and Total Spent -->
        <VBox alignment="TOP_RIGHT" spacing="8">
            <HBox alignment="CENTER_RIGHT" spacing="8">
                <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #8E8E93;" text="Wallet Balance" />
                <Label fx:id="walletBalanceLabel" style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 20px; -fx-text-fill: #28A745;" text="125.50 $" />
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="8">
                <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #8E8E93;" text="Total Spent:" />
                <Label fx:id="totalSpentLabel" style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 16px; -fx-text-fill: #333333;" text="1250.00 $" />
            </HBox>
        </VBox>
    </HBox>

    <!-- Pending Payments Alert (visible only if exists) -->
    <HBox fx:id="pendingPaymentsAlert" alignment="CENTER_LEFT" managed="false" spacing="16" style="-fx-background-color: #FF6B35; -fx-background-radius: 12px; -fx-padding: 20;" visible="false">

        <ImageView fitHeight="24" fitWidth="24" preserveRatio="true">
            <image>
                <Image url="@../images/warning.png" />
            </image>
        </ImageView>

        <VBox spacing="4" HBox.hgrow="ALWAYS">
            <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 16px; -fx-text-fill: white;" text="Pending Payments" />
            <Label fx:id="pendingPaymentsText" style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: white;" text="This customer has 1 unpaid parking session. Total amount: 18.50 $" wrapText="true" />
        </VBox>

        <Button onAction="#onViewPendingPayments" style="-fx-background-color: white; -fx-text-fill: #FF6B35; -fx-background-radius: 8px; -fx-padding: 8 16; -fx-font-family: 'Inter 18pt SemiBold'; -fx-font-size: 14px; -fx-cursor: hand;" text="View Details">
            <graphic>
                <Label style="-fx-text-fill: #FF6B35; -fx-font-size: 18px;" text="›" />
            </graphic>
        </Button>
    </HBox>

    <!-- Two Column Layout: Vehicles + Active Reservation -->
    <HBox alignment="TOP_LEFT" spacing="24">

        <!-- Left Column: Vehicles -->
        <VBox spacing="16" style="-fx-max-width: 50%;" HBox.hgrow="ALWAYS">
            <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 20px; -fx-text-fill: #2E3593;" text="Vehicles" />

            <VBox fx:id="vehiclesContainer" spacing="12">
                <!-- Vehicle items will be added programmatically -->
            </VBox>
        </VBox>

        <!-- Right Column: Active Reservation -->
        <VBox fx:id="activeReservationContainer" managed="false" spacing="16" style="-fx-max-width: 50%;" visible="false" HBox.hgrow="ALWAYS">

            <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 20px; -fx-text-fill: #2E3593;" text="Active stay/reservation" />

            <VBox spacing="12" style="-fx-background-color: #E8F5E9; -fx-background-radius: 12px; -fx-padding: 20; -fx-border-color: #4CAF50; -fx-border-radius: 12px; -fx-border-width: 2;">

                <Label fx:id="reservationParkingName" style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 18px; -fx-text-fill: #2E7D32;" text="Galeria Krakowska" />

                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #666666;" text="Vehicle:" />
                    <Label fx:id="reservationVehicle" style="-fx-font-family: 'Inter 18pt SemiBold'; -fx-font-size: 14px; -fx-text-fill: #333333;" text="KR 12345" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #666666;" text="Date:" />
                    <Label fx:id="reservationDate" style="-fx-font-family: 'Inter 18pt SemiBold'; -fx-font-size: 14px; -fx-text-fill: #333333;" text="2025-11-24" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #666666;" text="Spot:" />
                    <Label fx:id="reservationSpot" style="-fx-font-family: 'Inter 18pt SemiBold'; -fx-font-size: 14px; -fx-text-fill: #333333;" text="R-23" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label style="-fx-font-family: 'Inter 18pt Regular'; -fx-font-size: 14px; -fx-text-fill: #666666;" text="Cost:" />
                    <Label fx:id="reservationCost" style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 16px; -fx-text-fill: #4CAF50;" text="5.00 $" />
                </HBox>
            </VBox>
        </VBox>
    </HBox>

    <!-- Recent Activity -->
    <VBox spacing="16">
        <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 20px; -fx-text-fill: #2E3593;" text="Recent Activity" />

        <VBox fx:id="recentActivityContainer" spacing="12">
            <!-- Activity items will be added programmatically -->
        </VBox>
    </VBox>

    <!-- Quick Action Buttons -->
    <HBox alignment="CENTER" spacing="16">

        <!-- View All Reservations -->
        <Button fx:id="reservationBtn" maxWidth="Infinity" onAction="#onViewAllReservations" HBox.hgrow="ALWAYS">
         <styleClass>
            <String fx:value="customer_button" />
            <String fx:value="customer_button_reservations" />
            <String fx:value="c" />
         </styleClass>
         <graphic>
            <HBox alignment="CENTER" spacing="10.0">
               <children>
                  <ImageView fitHeight="30.0" fitWidth="30.0" pickOnBounds="true" preserveRatio="true">
                     <image>
                        <Image url="@../images/calendarWhite.png" />
                     </image>
                  </ImageView>
                  <VBox>
                     <children>
                        <Label text="View All Reservations">
                           <styleClass>
                              <String fx:value="customer_btn_txt" />
                              <String fx:value="customer_btn_txt_main" />
                           </styleClass>
                        </Label>
                        <Label styleClass="customer_btn_txt" text="Complete history and upcoming" />
                     </children>
                  </VBox>
                  <Region HBox.hgrow="ALWAYS" />
                  <Label styleClass="customer_btn_txt" text="&gt;" />
               </children>
            </HBox>
         </graphic>
        </Button>
      <Button maxWidth="Infinity" onAction="#onViewAllReservations" HBox.hgrow="ALWAYS">
         <styleClass>
            <String fx:value="customer_button" />
            <String fx:value="customer_button_payments" />
         </styleClass>
         <graphic>
            <HBox alignment="CENTER" spacing="10.0">
               <children>
                  <ImageView fitHeight="30.0" fitWidth="30.0" pickOnBounds="true" preserveRatio="true">
                     <image>
                        <Image url="@../images/calendarWhite.png" />
                     </image>
                  </ImageView>
                  <VBox>
                     <children>
                        <Label text="View All Payements" VBox.vgrow="ALWAYS">
                           <styleClass>
                              <String fx:value="customer_btn_txt" />
                              <String fx:value="customer_btn_txt_main" />
                           </styleClass>
                        </Label>
                        <Label styleClass="customer_btn_txt" text="Transaction history" />
                     </children>
                  </VBox>
                  <Region HBox.hgrow="ALWAYS" />
                  <Label styleClass="customer_btn_txt" text="&gt;" />
               </children>
            </HBox>
         </graphic>
      </Button>
    </HBox>

</VBox>
