<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import java.net.URL?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<VBox minWidth="1000.0" spacing="24" styleClass="main_container" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="parkflow.deskoptworker.Controllers.Worker.CustomerProfileController">

    <!-- Clear Filter Link -->
    <HBox alignment="CENTER_LEFT" spacing="8">
        <Button fx:id="clearFilterButton" onAction="#onClearFilter" styleClass="clear-filter-btn" text="✕ Clear customer filter - viewing all data" />
    </HBox>

    <!-- Page Header -->
    <VBox spacing="8">
        <Label styleClass="main_title" text="Customer Profile" />
        <Label styleClass="main_subtitle" text="Detailed information and activity" />
    </VBox>

    <!-- Customer Header Card -->
    <HBox alignment="CENTER_LEFT" styleClass="customer-header-card">

        <!-- Left: Name and Email -->
        <VBox spacing="4" HBox.hgrow="ALWAYS">
            <Label fx:id="customerNameLabel" styleClass="customer-header-name" text="Jan Kowalski" />
            <Label fx:id="customerEmailLabel" styleClass="customer-header-email" text="jan.kowalski@gmail.com" />
        </VBox>

        <!-- Right: Wallet and Total Spent -->
        <VBox alignment="TOP_RIGHT" spacing="8">
            <HBox alignment="CENTER_RIGHT" spacing="8">
                <Label styleClass="customer-metric-label" text="Wallet Balance" />
                <Label fx:id="walletBalanceLabel" styleClass="customer-wallet-balance" text="125.50 $" />
            </HBox>
            <HBox alignment="CENTER_RIGHT" spacing="8">
                <Label styleClass="customer-metric-label" text="Total Spent:" />
                <Label fx:id="totalSpentLabel" styleClass="customer-total-spent" text="1250.00 $" />
            </HBox>
        </VBox>
    </HBox>

    <!-- Pending Payments Alert (visible only if exists) -->
    <HBox fx:id="pendingPaymentsAlert" alignment="CENTER_LEFT" managed="false" spacing="16" styleClass="pending_payment_hbox" visible="false">
      <StackPane styleClass="pending_payment_icon">
         <children>
      
              <ImageView fitHeight="24" fitWidth="24" preserveRatio="true">
                  <image>
                      <Image url="@../images/WarningWhite.png" />
                  </image>
              </ImageView>
         </children>
      </StackPane>

        <VBox spacing="4" HBox.hgrow="ALWAYS">
            <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 16px; -fx-text-fill: white;" text="Pending Payments" />
            <Label fx:id="pendingPaymentsText" styleClass="pending_payment_desc" text="This customer has 1 unpaid parking session. Total amount: 18.50 $" wrapText="true" />
        </VBox>

        <Button onAction="#onViewPendingPayments" styleClass="pending_payment_button" text="View Details">
            <graphic>
                <Label style="-fx-text-fill: #FF6B35; -fx-font-size: 18px;" text="›" />
            </graphic>
        </Button>
    </HBox>


    <HBox spacing="24" VBox.vgrow="ALWAYS">

        <!-- Left Column: Vehicles -->
        <VBox spacing="16" styleClass="section_vbox" HBox.hgrow="ALWAYS">
            <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 20px; -fx-text-fill: #2E3593;" text="Vehicles" />

            <VBox fx:id="vehiclesContainer" spacing="12">

            </VBox>
        </VBox>
    </HBox>

    <VBox spacing="16" styleClass="section_vbox">
        <HBox alignment="CENTER_LEFT">
            <Label style="-fx-font-family: 'Inter 18pt Bold'; -fx-font-size: 20px; -fx-text-fill: #2E3593;" text="Recent Activity" HBox.hgrow="ALWAYS" />
            <Button onAction="#onViewAllActivity" style="-fx-background-color: transparent; -fx-text-fill: #2E3593; -fx-cursor: hand; -fx-font-family: 'Inter 18pt SemiBold'; -fx-font-size: 14px; -fx-underline: true;" text="View All →" />
        </HBox>

        <VBox fx:id="recentActivityContainer" spacing="12">

        </VBox>
    </VBox>

    <HBox alignment="CENTER" spacing="16">

        <Button fx:id="reservationBtn" maxWidth="Infinity" onAction="#onViewAllReservations" HBox.hgrow="ALWAYS">
            <styleClass>
                <String fx:value="customer_button" />
                <String fx:value="customer_button_reservations" />
            </styleClass>
            <graphic>
                <HBox alignment="CENTER" spacing="10.0">
                    <ImageView fitHeight="30.0" fitWidth="30.0" pickOnBounds="true" preserveRatio="true">
                        <Image url="@../images/calendarWhite.png" />
                    </ImageView>
                    <VBox>
                        <Label text="View All Reservations">
                            <styleClass>
                                <String fx:value="customer_btn_txt" />
                                <String fx:value="customer_btn_txt_main" />
                            </styleClass>
                        </Label>
                        <Label styleClass="customer_btn_txt" text="Complete history and upcoming" />
                    </VBox>
                    <Region HBox.hgrow="ALWAYS" />
                    <Label styleClass="customer_btn_txt" text="&gt;" />
                </HBox>
            </graphic>
        </Button>

        <Button maxWidth="Infinity" onAction="#onViewAllPayments" HBox.hgrow="ALWAYS">
            <styleClass>
                <String fx:value="customer_button" />
                <String fx:value="customer_button_payments" />
            </styleClass>
            <graphic>
                <HBox alignment="CENTER" spacing="10.0">
                    <ImageView fitHeight="30.0" fitWidth="30.0" pickOnBounds="true" preserveRatio="true">
                        <Image url="@../images/dollarWhite.png" />
                    </ImageView>
                    <VBox>
                        <Label text="View All Payments" VBox.vgrow="ALWAYS">
                            <styleClass>
                                <String fx:value="customer_btn_txt" />
                                <String fx:value="customer_btn_txt_main" />
                            </styleClass>
                        </Label>
                        <Label styleClass="customer_btn_txt" text="Transaction history" />
                    </VBox>
                    <Region HBox.hgrow="ALWAYS" />
                    <Label styleClass="customer_btn_txt" text="&gt;" />
                </HBox>
            </graphic>
        </Button>
    </HBox>
   <stylesheets>
      <URL value="@../styles/customers.css" />
      <URL value="@../styles/table.css" />
      <URL value="@../styles/mainPanel.css" />
   </stylesheets>

</VBox>
