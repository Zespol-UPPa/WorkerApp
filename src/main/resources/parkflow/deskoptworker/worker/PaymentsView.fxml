<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="20" styleClass="main_container" stylesheets="@../styles/mainPanel.css, @../styles/customers.css, @../styles/table.css, @../styles/components.css" VBox.vgrow="ALWAYS" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="parkflow.deskoptworker.Controllers.Worker.PaymentsViewController">

    <!-- Clear Filter Button (hidden by default) -->
    <HBox fx:id="clearFilterBox" managed="false" visible="false">
        <HBox alignment="CENTER_LEFT" onMouseClicked="#onClearFilter" spacing="6" styleClass="clear-filter-btn">
            <Label styleClass="clear-filter-x" text="âœ•" />
            <Label fx:id="clearFilterLabel" styleClass="clear-filter-text" text="Clear customer filter" />
        </HBox>
    </HBox>

    <!-- Header Section -->
    <VBox spacing="5">
        <Label fx:id="titleLabel" styleClass="main_title" text="Parking Transactions" />
        <Label fx:id="subtitleLabel" styleClass="main_subtitle" text="Revenue from parking sessions and reservations at your locations" />
    </VBox>

    <!-- Metric Cards (visible only when filtered by customer) -->
    <HBox fx:id="metricsBox" managed="false" spacing="16" visible="false">
        <fx:include fx:id="walletBalanceCard" source="../components/MetricCard.fxml" HBox.hgrow="ALWAYS" />
        <fx:include fx:id="totalSpentCard" source="../components/MetricCard.fxml" HBox.hgrow="ALWAYS" />
        <fx:include fx:id="sessionsCountCard" source="../components/MetricCard.fxml" HBox.hgrow="ALWAYS" />
        <fx:include fx:id="pendingCard" source="../components/MetricCard.fxml" HBox.hgrow="ALWAYS" />
    </HBox>

    <!-- Search and Filter Bar -->
    <HBox spacing="12">
        <HBox alignment="CENTER_LEFT" spacing="12" styleClass="search-container" HBox.hgrow="ALWAYS">
            <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                <image>
                    <Image url="@../images/search.png" />
                </image>
            </ImageView>

            <TextField fx:id="searchField" promptText="Search by name, email, ID or PESEL..." styleClass="search-field" HBox.hgrow="ALWAYS" />
        </HBox>

        <!-- Filter Bar -->
        <fx:include fx:id="filterBar" source="../components/filterBarPayments.fxml" />
    </HBox>
      <TableView fx:id="transactionsTable" VBox.vgrow="ALWAYS">
          <columns>
              <TableColumn fx:id="dateColumn" minWidth="140" prefWidth="160.0" text="DATE" />
              <TableColumn fx:id="customerColumn" minWidth="180.0" prefWidth="220.0" text="CUSTOMER" />
              <TableColumn fx:id="typeColumn" minWidth="140" prefWidth="160" styleClass="centered-column" text="TYPE" />
              <TableColumn fx:id="parkingColumn" minWidth="180" prefWidth="200" text="PARKING" />
              <TableColumn fx:id="amountColumn" minWidth="110.0" prefWidth="130.0" text="AMOUNT" />
              <TableColumn fx:id="statusColumn" minWidth="130.0" prefWidth="150.0" styleClass="centered-column" text="STATUS" />
          </columns>

             <placeholder>
              <VBox alignment="CENTER" spacing="10">
                  <Label styleClass="table-placeholder-title" text="No transactions found" />
                  <Label styleClass="table-placeholder-subtitle" text="Transactions will appear here when customers use your parkings" />
              </VBox>
          </placeholder>
      </TableView>

</VBox>
